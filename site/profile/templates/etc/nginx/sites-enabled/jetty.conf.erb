# MANAGED BY PUPPET
server {
  listen                *:80 default_server;
  server_name           _;

  access_log            /var/log/nginx/jetty.access.log combined;
  error_log             /var/log/nginx/jetty.error.log;

  location / {
    proxy_pass              http://localhost:8080;
    proxy_read_timeout      60s;
    proxy_connect_timeout   60s;
    proxy_redirect          off;
  }

  # Health Check used by AWS ELB
  location /health-check {
    proxy_pass              http://localhost:8080;
    proxy_intercept_errors  on;
    error_page              400 =200 /health-check-200;
  }

  location /health-check-200 {
    return 200 "OK";
  }

}